#ifndef THERMISTOR_LOOKUP_H
#define THERMISTOR_LOOKUP_H

#include <Arduino.h>
#include <common.h>

struct LookupEntry
{
    uint8_t temperature;
    float value;
};

const LookupEntry lookupBottomMiddle[] = {


// {0, 1},
// {25, 1.00715513834484},
// {35, 1.12484607155925},
// {40, 1.13743718719145},
// {45, 1.13506399305814},
// {50, 1.13067636137849},
// {55, 1.11648433361902},
// {60, 1.08544627050144},
// {65, 1.08660293694492},
// {70, 1.08001421226446},
// {75, 1.16027464588806},
// {80, 1.15704474661452},
// {85, 1.1483519592037},
// {90, 1.13590936413276},
// {95, 1.11755407120932},
// {100, 1.098508196505047},
// {105, 1.1022625340138},
// {110, 1.15477823648416},
// {115, 1.07527755445145},
// {120, 1.11340733480523},
// {125, 1.11488197269303},
// {130, 1.11527719047251},
// {135, 1.11613530209391},
// {140, 1.11503246127647},
// {145, 1.11589573878646},
// {150, 1.09704724078137},
// {155, 1.07429110718977},
// {160, 1.077298663304549},
// {165, 1.06001826143415},
// {170, 1.064369457141502},
// {175, 1.077960941911383},
// {180, 1.05465186375123},
// {185, 1.04123672344689},

//  {0, 1},
// {25, 1},
// {35, 1.1052933159867},
// {40, 1.21609667854928},
// {45, 1.2911142404736},
// {50, 1.3025297616858},
// {55, 1.23009750677688},
// {60, 1.21020012832492},
// {65, 1.1958744927507},
// {70, 1.17736636429599},
// {75, 1.16148454663088},
// {80, 1.14128677245524},
// {85, 1.12056018153759},
// {90, 1.09751446890912},
// {95, 1.0719327567656},
// {100, 1.04444728765731},
// {105, 1.01168280610488},
// {110, 0.997951853293252},
// {115, 0.997484122047861},
// {120, 0.995485646422296},
// {125, 0.991950691084749},
// {130, 0.986936226835838},
// {135, 0.980406736094767},
// {140, 0.971610618160775},
// {145, 0.960416571461218},
// {150, 0.946838744739725},
// {155, 0.939711842929308},
// {160, 0.942063273857483},
// {165, 0.944163192400784},
// {170, 0.945540089910834},
// {175, 0.947118566344439},
// {180, 0.948725983429991},
// {185, 0.948952977460463},
// {190, 0.947112176288284},
// {195, 0.94452632310351},
// {200, 0.943146841233212},
// {205, 0.940750491942809},
// {210, 0.935013650790026},

{35, 1.1052933159867},
{40, 1.21609667854928},
{45, 1.2911142404736},
{50, 1.3025297616858},
{55, 1.23009750677688},
{60, 1.21020012832492},
{65, 1.1958744927507},
{70, 1.17736636429599},
{75, 1.16148454663088},
{80, 1.14128677245524},
{85, 1.12056018153759},
{90, 1.07751446890912},
{95, 1.0719327567656},
{100, 1.04444728765731},
{105, 1.08250060253222},
{110, 1.06780848302378},
{115, 1.06730801059121},
{120, 1.06516964167186},
{125, 1.06138723946068},
{130, 1.05602176271435},
{135, 1.0490352076214},
{140, 1.03962336143203},
{145, 1.0276457314635},
{150, 1.01311745687151},
{155, 1.04308014565153},
{160, 1.04569023398181},
{165, 1.04802114356487},
{170, 1.04954949980103},
{175, 1.05130160864233},
{180, 1.05308584160729},
{185, 1.05333780498111},
{190, 1.05129451568},
{195, 1.0484242186449},
{200, 1.04689299376887},
{205, 1.04423304605652},
{210, 1.03786515237693},
{215, 1.02786515237693},
{220, 1.01786515237693},







};

const LookupEntry lookupSide[] = {
    {30, 0.995205469483767},
    {35, 1.11724354649558},
    {40, 1.16221262415921},
    {45, 1.12448359746383},
    {50, 1.14499238909032},
    {55, 1.12793950375559},
    {60, 1.12337287712101},
    {65, 1.10545110139771},
    {70, 1.10234749124935},
    {75, 1.08567465426014},
    {80, 1.07869989037226},
    {85, 1.06930433073885},
    {90, 1.0538318430518},
    {95, 1.03201418470286},
    {100, 1.01896914997622},
    {105, 1.03251768817139},
    {110, 1.04022066012968},
    {115, 1.03674422635691},
    {120, 1.03245955349587},
    {125, 0.985668882970875},
    {130, 1.0020830920359},
    {135, 0.992462503013065},
    {140, 0.991221866504337},
    {145, 1.00439387665255},
    {150, 1.00334435684778},
    {155, 0.999788726679194},
    {160, 1.00049372788227},
    {165, 1.00610676732641},
    {170, 0.998992362621583},
    {175, 1.00239035441939},
    {180, 1.00496908541176},
    {185, 1.0084029872169}};

const LookupEntry noScaling[]{

    {0, 1},

    {100, 1},

    {200, 1}

};

class ThermistorLookup
{

public:
    ThermistorLookup();
    ~ThermistorLookup();

    // Add your member functions and variables here

    float getFactor(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment, uint8_t temperature);

    const LookupEntry *getTable(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment);

    // Function to get the size of a lookup table
    template <size_t N>
    constexpr size_t getLookupTableSize(const LookupEntry (&)[N])
    {
        return N;
    }
    float static interpolate(float x, float x0, float x1, float y0, float y1);
    uint8_t tableSize;

private:
};

#endif // THERMISTOR_LOOKUP_H
