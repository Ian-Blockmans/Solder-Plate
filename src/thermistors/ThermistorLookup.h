#ifndef THERMISTOR_LOOKUP_H
#define THERMISTOR_LOOKUP_H

#include <Arduino.h>
#include <common.h>

struct LookupEntry
{
    uint8_t temperature;
    float value;
};

const LookupEntry lookupBottomMiddle[] = {

// {20, 1},
// {25, 1},
// {30, 1.05421},
// {35, 1.15779326424813},
// {40, 1.07137955413676},
// {45, 1.02848510334699},
// {50, 1.0166963542828},
// {55, 1.00055351519777},
// {60, 0.998966148199037},
// {65, 1.00436499654204},
// {70, 0.994176485727482},
// {75, 0.996391553112729},
// {80, 1.00113614372955},
// {85, 1.00053768922283},
// {90, 1.00020751145521},
// {95, 1.00128249791913},
// {100, 1.0025246862876},
// {105, 1.01020841898173},
// {110, 1.00848854034523},
// {115, 1.00896686906428},
// {120, 1.04794644679831},
// {125, 1.01523894946},
// {130, 1.03214558479698},
// {135, 1.02223637810346},
// {140, 1.02095852249947},
// {145, 1.03452569295212},
// {150, 1.03344468755321},
// {155, 1.02978238847957},
// {160, 1.03050853971874},
// {165, 1.0362899703462},
// {170, 1.02896213350023},
// {175, 1.03246206505197},
// {180, 1.03511815797411},
// {185, 1.0386550768334},
// {0, 1},
// {25, 1.00715513834484},
// {35, 1.12484607155925},
// {40, 1.13743718719145},
// {45, 1.13506399305814},
// {50, 1.13067636137849},
// {55, 1.11648433361902},
// {60, 1.08544627050144},
// {65, 1.08660293694492},
// {70, 1.08001421226446},
// {75, 1.06027464588806},
// {80, 1.05704474661452},
// {85, 1.0483519592037},
// {90, 1.03590936413276},
// {95, 1.01755407120932},
// {100, 0.997970532804681},
// {105, 1.0022625340138},
// {110, 1.00477823648416},
// {115, 1.01527755445145},
// {120, 1.01340733480523},
// {125, 1.01488197269303},
// {130, 1.01527719047251},
// {135, 1.01613530209391},
// {140, 1.01503246127647},
// {145, 1.00589573878646},
// {150, 0.99704724078137},
// {155, 0.989621222331136},
// {160, 0.997298663304549},
// {165, 1.00001826143415},
// {170, 0.994369457141502},
// {175, 0.997960941911383},
// {180, 1.00465186375123},
// {185, 1.00123672344689},
{0, 1},
{25, 1.00715513834484},
{35, 1.12484607155925},
{40, 1.13743718719145},
{45, 1.13506399305814},
{50, 1.13067636137849},
{55, 1.11648433361902},
{60, 1.08544627050144},
{65, 1.08660293694492},
{70, 1.08001421226446},
{75, 1.06027464588806},
{80, 1.05704474661452},
{85, 1.0483519592037},
{90, 1.03590936413276},
{95, 1.01755407120932},
{100, 0.998508196505047},
{105, 1.0022625340138},
{110, 1.00477823648416},
{115, 1.01527755445145},
{120, 1.01340733480523},
{125, 1.01488197269303},
{130, 1.01527719047251},
{135, 1.01613530209391},
{140, 1.01503246127647},
{145, 1.00589573878646},
{150, 0.99704724078137},
{155, 0.99429110718977},
{160, 0.997298663304549},
{165, 1.00001826143415},
{170, 0.994369457141502},
{175, 0.997960941911383},
{180, 1.00465186375123},
{185, 1.00123672344689},






};

const LookupEntry lookupTopSide[] = {
    {30, 0.995205469483767},
    {35, 1.11724354649558},
    {40, 1.16221262415921},
    {45, 1.12448359746383},
    {50, 1.14499238909032},
    {55, 1.12793950375559},
    {60, 1.12337287712101},
    {65, 1.10545110139771},
    {70, 1.10234749124935},
    {75, 1.08567465426014},
    {80, 1.07869989037226},
    {85, 1.06930433073885},
    {90, 1.0538318430518},
    {95, 1.03201418470286},
    {100, 1.01896914997622},
    {105, 1.03251768817139},
    {110, 1.04022066012968},
    {115, 1.03674422635691},
    {120, 1.03245955349587},
    {125, 0.985668882970875},
    {130, 1.0020830920359},
    {135, 0.992462503013065},
    {140, 0.991221866504337},
    {145, 1.00439387665255},
    {150, 1.00334435684778},
    {155, 0.999788726679194},
    {160, 1.00049372788227},
    {165, 1.00610676732641},
    {170, 0.998992362621583},
    {175, 1.00239035441939},
    {180, 1.00496908541176},
    {185, 1.0084029872169}};

const LookupEntry noScaling[]{

    {0, 1},

    {100, 1},

    {200, 1}

};

class ThermistorLookup
{

public:
    ThermistorLookup();
    ~ThermistorLookup();

    // Add your member functions and variables here

    float getFactor(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment, uint8_t temperature);

    const LookupEntry *getTable(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment);

    // Function to get the size of a lookup table
    template <size_t N>
    constexpr size_t getLookupTableSize(const LookupEntry (&)[N])
    {
        return N;
    }
    float static interpolate(float x, float x0, float x1, float y0, float y1);
    uint8_t tableSize;

private:
};

#endif // THERMISTOR_LOOKUP_H
