#ifndef THERMISTOR_LOOKUP_H
#define THERMISTOR_LOOKUP_H

#include <Arduino.h>
#include <common.h>

struct LookupEntry
{
    uint8_t temperature;
    float value;
};

const LookupEntry lookupBottomMiddle[] = {
    {30, 0.995205469483767},
    {35, 1.11724354649558},
    {40, 1.16221262415921},
    {45, 1.12448359746383},
    {50, 1.14499238909032},
    {55, 1.12793950375559},
    {60, 1.12337287712101},
    {65, 1.10545110139771},
    {70, 1.10234749124935},
    {75, 1.08567465426014},
    {80, 1.07869989037226},
    {85, 1.06930433073885},
    {90, 1.0538318430518},
    {95, 1.03201418470286},
    {100, 1.01896914997622},
    {105, 1.03251768817139},
    {110, 1.04022066012968},
    {115, 1.03674422635691},
    {120, 1.04064666742085},
    {125, 1.03913188754372},
    {130, 1.0442917352224},
    {135, 1.04499116157739},
    {140, 1.04135817519154},
    {145, 1.03658285343317},
    {150, 1.0259509365488},
    {155, 1.02598110989319},
    {160, 1.03930608139151},
    {165, 1.03583584549012},
    {170, 1.03308702915583},
    {175, 1.03114013373797},
    {180, 1.01800272746916},
    {185, 1.0084029872169},

};

const LookupEntry lookupTopSide[] = {
    {30, 0.995205469483767},
    {35, 1.11724354649558},
    {40, 1.16221262415921},
    {45, 1.12448359746383},
    {50, 1.14499238909032},
    {55, 1.12793950375559},
    {60, 1.12337287712101},
    {65, 1.10545110139771},
    {70, 1.10234749124935},
    {75, 1.08567465426014},
    {80, 1.07869989037226},
    {85, 1.06930433073885},
    {90, 1.0538318430518},
    {95, 1.03201418470286},
    {100, 1.01896914997622},
    {105, 1.03251768817139},
    {110, 1.04022066012968},
    {115, 1.03674422635691},
    {120, 1.03245955349587},
    {125, 0.985668882970875},
    {130, 1.0020830920359},
    {135, 0.992462503013065},
    {140, 0.991221866504337},
    {145, 1.00439387665255},
    {150, 1.00334435684778},
    {155, 0.999788726679194},
    {160, 1.00049372788227},
    {165, 1.00610676732641},
    {170, 0.998992362621583},
    {175, 1.00239035441939},
    {180, 1.00496908541176},
    {185, 1.0084029872169}};

const LookupEntry noScaling[]{

    {100, 1.4},

    {423, 5342},

    {423, 532}

};

class ThermistorLookup
{

public:
    ThermistorLookup();
    ~ThermistorLookup();

    // Add your member functions and variables here

    float getFactor(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment, uint8_t temperature);

    const LookupEntry *getTable(ThermistorZ_Placement zPlacement, ThermistorXY_Placement xyPlacment);

    // Function to get the size of a lookup table
    template <size_t N>
    constexpr size_t getLookupTableSize(const LookupEntry (&)[N])
    {
        return N;
    }
    float interpolate(float x, float x0, float x1, float y0, float y1);
    uint8_t tableSize;

private:
};

#endif // THERMISTOR_LOOKUP_H
